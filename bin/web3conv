#!/usr/bin/env node
const args = require("yargs");
const { hash } = require("../src/hash");
const { asciitobytes32, bytes32ToAscii } = require("../src/asciiAndBytes32");
const { toChecksumAddress } = require("../src/checksumAddress");
const { base58tohex, hextobase58 } = require("../src/base58");

args
  .usage("Usage: $0 [command] <args>")
  .demandCommand()
  .recommendCommands()
  .strict()
  .command("asciitobytes32", "[-s <ascii string>]", (yargs) => {
    let option = yargs.option("string", { alias: "s", demandOption: true })
      .argv;
    asciitobytes32(option.string);
  })
  .command("bytes32toascii", "[-s <bytes32 string>]", (yargs) => {
    let option = yargs.option("string", {
      alias: "s",
      demandOption: true,
      string: true,
    }).argv;
    bytes32ToAscii(option.string);
  })
  .command(
    "hash",
    "[-a <hash algorithm>] [-s [string] | -f [file]]",
    (yargs) => {
      let option = yargs
        .option("string", { alias: "s" })
        .option("algorithm", { alias: "a", demandOption: true })
        .option("file", { alias: "f" }).argv;
      hash(option.algorithm, option.string, option.file);
    }
  )
  .command("checksumaddress", "[-a <address>] [-i [chainId]]", (yargs) => {
    let option = yargs
      .option("address", {
        alias: "a",
        demandOption: true,
        string: true,
      })
      .option("chainId", { alias: "i", string: "true" }).argv;
    toChecksumAddress(option.address, option.chainId);
  })
  .command("base58tohex", "[-s <base85 string>]", (yargs) => {
    let option = yargs.option("string", {
      alias: "s",
      demandOption: true,
      string: true,
    }).argv;
    base58tohex(option.string);
  })
  .command("hextobase58", "[-s <hex string>]", (yargs) => {
    let option = yargs.option("string", {
      alias: "s",
      demandOption: true,
      string: true,
    }).argv;
    hextobase58(option.string);
  })
  .help("h")
  .alias("h", "help")
  .alias("v", "version").argv;
